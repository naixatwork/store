"use strict";(self.webpackChunkcustomer_frontend=self.webpackChunkcustomer_frontend||[]).push([[134],{9134:($,h,o)=>{o.r(h),o.d(h,{StoreModule:()=>J});var d=o(9808),l=o(4521),A=o(7579),x=o(8372),p=o(3075),P=o(2722),t=o(5e3),g=o(520),T=o(4004),y=o(629),v=o(7261),F=o(9281),S=o(1303);let f=(()=>{class r{constructor(e,s,a,u,i,m){this.httpClient=e,this.authService=s,this.matSnackBar=a,this.router=u,this.customerService=i,this.storageService=m}getProducts(e){const s=(new g.LE).append("name",e||"");return this.httpClient.get("Product",{params:s}).pipe((0,T.U)(a=>{if(!this.authService.isLoggedIn())return a;const u=this.customerService.getPurchases();for(const i of a){i.isAlreadyPurchased=!1;for(const m of u)i.id===m.id&&(i.isAlreadyPurchased=!0)}return a}))}purchaseProduct(e){const s=this.storageService.get("auth");!s||this.httpClient.put(`Customer/${s.id}`,[e]).subscribe(()=>{this.matSnackBar.open("Your purchase has been completed we will show admin!","Dismiss")})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(g.eN),t.LFG(y.e),t.LFG(v.ux),t.LFG(l.F0),t.LFG(F.v),t.LFG(S.V))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var n=o(9224),Z=o(7423),C=o(3874);function U(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-header"),t._UZ(2,"div",4),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"number"),t.TgZ(8,"span",5),t._uU(9,"available"),t.qZA(),t.qZA(),t.qZA(),t._UZ(10,"img",6),t.TgZ(11,"mat-card-content"),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"mat-card-actions"),t.TgZ(15,"div",7),t.TgZ(16,"button",8),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().purchase(u)}),t._uU(17),t.TgZ(18,"mat-icon"),t._uU(19,"sell"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=c.$implicit;t.xp6(4),t.Oqu(e.name),t.xp6(2),t.hij("",t.lcZ(7,7,e.price)," $ "),t.xp6(4),t.Q6J("src",e.imageUrl,t.LSH)("alt",e.name),t.xp6(3),t.Oqu(e.description),t.xp6(3),t.Q6J("disabled",e.isAlreadyPurchased),t.xp6(1),t.hij("",e.isAlreadyPurchased?"Purchased":"Add to Cart"," ")}}const L=[{path:"",component:(()=>{class r{constructor(e,s){this.storeService=e,this.storageService=s,this.searchControl=new p.NI(""),this.products$=this.storeService.getProducts(),this.unsubscribeAll=new A.x}ngOnInit(){this.onSearchChange()}onSearchChange(){this.searchControl.valueChanges.pipe((0,x.b)(400),(0,P.R)(this.unsubscribeAll)).subscribe(e=>{this.products$=this.storeService.getProducts(e)})}purchase(e){this.storeService.purchaseProduct(e)}ngOnDestroy(){this.unsubscribeAll.complete()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(S.V))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-store"]],decls:4,vars:3,consts:[[1,"p-5"],[1,"product-container"],["class","product",4,"ngFor","ngForOf"],[1,"product"],["mat-card-avatar","",1,"bg-green-400"],[1,"text-green-400"],["mat-card-image","",1,"product-image",3,"src","alt"],[1,"flex","gap-1"],["mat-flat-button","","color","accent",3,"disabled","click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,U,20,9,"mat-card",2),t.ALo(3,"async"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,s.products$)))},directives:[d.sg,n.a8,n.dk,n.kc,n.n5,n.$j,n.G2,n.dn,n.hq,Z.lW,C.Hw],pipes:[d.Ov,d.JJ],styles:[".product-container[_ngcontent-%COMP%]{display:grid;grid-gap:15px;gap:15px;grid-template-columns:repeat(5,1fr)}.product[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:300px;max-width:100%}"]}),r})()}];let M=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[l.Bz.forChild(L)],l.Bz]}),r})();var O=o(7322),b=o(7531);let J=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[f],imports:[[d.ez,M,n.QW,Z.ot,C.Ps,O.lN,b.c,p.UX,v.ZX]]}),r})()}}]);